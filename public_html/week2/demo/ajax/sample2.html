<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style type="text/css">
            button {
                cursor: pointer; 
                text-decoration: underline;
            }
        </style>
    </head>
    <body>
        
        
      <button class="good">
        Make a request
      </button>
        
      <button class="bad">
        Make a bad request
      </button>
        
        <p>Open browser console</p>
        
      <script type="text/javascript">            
            'use strict';
          
        var httpRequest;
        document.querySelector('button.good').addEventListener('click', makeRequest.bind(null, '../data/todo.json', alertContents) );
        document.querySelector('button.bad').addEventListener('click', makeRequest.bind(null, 'data/todo.json', alertContents) );

        function makeRequest(url, callback) {
            
          httpRequest = new XMLHttpRequest();

          if ( !httpRequest ) {
            console.log('Giving up :( Cannot create an XMLHTTP instance');
            return false;
          }
          
          httpRequest.addEventListener('readystatechange', callback);
          httpRequest.open('GET', url);
          httpRequest.send();
        }

        function alertContents() {
            /* this is refrenced to httpRequest */
            /*  States (uses State Pattern)
             *  DONE : 4
             *  HEADERS_RECEIVED : 2
             *  LOADING : 3
             *  OPENED : 1
              * UNSENT : 0
             */
            if ( this.readyState === XMLHttpRequest.DONE ) {
              if ( this.status === 200 ) {
                console.log( this.responseText );
              } else {
                console.log('There was a problem with the request.');
              }
            }
        }
        
     
      </script>
        
        
    </body>
</html>
