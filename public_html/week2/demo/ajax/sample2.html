<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        
        
      <button class="good" style="cursor: pointer; text-decoration: underline">
        Make a request
      </button>
        
        <button class="bad" style="cursor: pointer; text-decoration: underline">
        Make a bad request
      </button>
        
        <p>Open browser console</p>
        
      <script type="text/javascript">
          
        var httpRequest;
        document.querySelector('button.good').addEventListener('click', makeRequest.bind(null, '../data/todo.json') );
        document.querySelector('button.bad').addEventListener('click', makeRequest.bind(null, 'data/todo.json') );

        function makeRequest(url) {
            
          httpRequest = new XMLHttpRequest();

          if (!httpRequest) {
            console.log('Giving up :( Cannot create an XMLHTTP instance');
            return false;
          }
          httpRequest.onreadystatechange = alertContents;
          httpRequest.open('GET', url);
          httpRequest.send();
        }

        function alertContents() {
            /* this is refrenced to httpRequest */
            /*  States (uses State Pattern)
             *  DONE : 4
             *  HEADERS_RECEIVED : 2
             *  LOADING : 3
             *  OPENED : 1
              * UNSENT : 0
             */
            if ( this.readyState === XMLHttpRequest.DONE ) {
              if ( this.status === 200 ) {
                console.log( this.responseText );
              } else {
                console.log('There was a problem with the request.');
              }
            }
        }
        
     
      </script>
        
        
    </body>
</html>
