(function(){"use strict";angular.module("app",["ngRoute"])})();(function(){"use strict";angular.module("app.review",[]);angular.module("app").requires.push("app.review")})();(function(){"use strict";angular.module("app.review").config(e);e.$inject=["$routeProvider"];function e(e){e.when("/review",{templateUrl:"/review/review-home.view.html",controller:"ReviewHomeController",controllerAs:"vm"}).when("/add",{templateUrl:"/review/review-form.view.html",controller:"ReviewCreateController",controllerAs:"vm"}).when("/update/:id",{templateUrl:"/review/review-form.view.html",controller:"ReviewUpdateController",controllerAs:"vm"}).otherwise({redirectTo:"/review"})}})();(function(){"use strict";angular.module("app.review").constant("REQUEST",{Reviews:"/api/v1/reviews"})})();(function(){"use strict";angular.module("app.review").factory("ReviewService",e);e.$inject=["$http","REQUEST","AuthenticationService"];function e(e,t,n){var r=t.Reviews;var i={getReviews:o,getReview:a,deleteReview:u,addReview:l,updateReview:c};return i;function o(){return e.get(r,s()).then(t,n);function t(e){return e.data}function n(e){return[]}}function a(t){var n=r+"/"+t;return e.get(n,s()).then(i,o);function i(e){return e.data}function o(e){return[]}}function u(t){var n=r+"/"+t;return e.delete(n,s()).then(i,o);function i(e){return"Delete Completed"}function o(e){return"Delete Failed"}}function l(t){return e.post(r,t,s()).then(n,i);function n(e){return"Review Added"}function i(e){return"Review Add Failed"}}function c(t,n){var i=r+"/"+t;return e.put(i,n,s()).then(o,a);function o(e){return"Review Updated"}function a(e){return"Review Update Failed"}}function s(){return{headers:{Authorization:"Bearer "+n.getToken()}}}}})();(function(){"use strict";angular.module("app.review").controller("ReviewHomeController",e);e.$inject=["ReviewService","$window","AuthenticationService"];function e(e,t,n){var r=this;r.reviews=[];r.deleteReview=a;r.message="";r.isLoggedIn=n.isLoggedIn();i();function i(){o()}function o(){e.getReviews().then(function(e){r.reviews=e})}function a(n){var i=t.confirm("are you sure?");if(i){e.deleteReview(n).then(function(e){r.message=e;o()})}}}})();(function(){"use strict";angular.module("app.review").controller("ReviewCreateController",e);e.$inject=["ReviewService"];function e(e){var t=this;t.data={author:"",rating:"",reviewText:""};t.submit=r;t.message="";t.title="Add Review";n();function n(){}function r(){e.addReview(t.data).then(function(e){t.message=e})}}})();(function(){"use strict";angular.module("app.review").controller("ReviewUpdateController",e);e.$inject=["ReviewService","$routeParams"];function e(e,t){var n=this;n.data={author:"",rating:"",reviewText:""};n.submit=a;n.message="";n.title="Update Review";var r=t.id;i();function i(){o()}function o(){e.getReview(r).then(function(e){n.data.author=e.author;n.data.rating=e.rating;n.data.reviewText=e.reviewText})}function a(){e.updateReview(r,n.data).then(function(e){n.message=e})}}})();(function(){"use strict";angular.module("app.auth",[]);angular.module("app").requires.push("app.auth")})();(function(){"use strict";angular.module("app.auth").config(e);e.$inject=["$routeProvider"];function e(e){e.when("/login",{templateUrl:"/auth/login.view.html",controller:"LoginController",controllerAs:"vm"}).when("/register",{templateUrl:"/auth/register.view.html",controller:"RegisterController",controllerAs:"vm"})}})();(function(){"use strict";angular.module("app.auth").constant("AUTH_REQUEST",{Register:"/api/v1/register/",Login:"/api/v1/login/"})})();(function(){"use strict";angular.module("app.auth").factory("AuthenticationService",e);e.$inject=["$http","AUTH_REQUEST","$window"];function e(e,t,n){var r=t.Login,i=t.Register;var o={currentUser:s,saveToken:a,getToken:u,isLoggedIn:c,register:v,login:f,logout:l};return o;function a(e){n.localStorage.setItem("loc8r-token",e)}function u(){return n.localStorage.getItem("loc8r-token")}function l(){n.localStorage.removeItem("loc8r-token")}function c(){var e=u();if(e){var t=JSON.parse(n.atob(e.split(".")[1]));return t.exp>Date.now()/1e3}else{return false}}function s(){if(c()){var e=u();var t=JSON.parse(n.atob(e.split(".")[1]));return{email:t.email,name:t.name}}}function v(t){return e.post(i,t).then(n,r);function n(e){a(e.data.token);return true}function r(e){return"Sorry could not Register this user"}}function f(t){return e.post(r,t).then(n,i);function n(e){a(e.data.token);return true}function i(e){return"Sorry could not Login"}}}})();(function(){"use strict";angular.module("app.auth").controller("RegisterController",e);e.$inject=["AuthenticationService","$location"];function e(e,t){var n=this;n.credentials={name:"",email:"",password:""};n.onSubmit=i;function r(){}function i(){n.formError="";if(!n.credentials.name.length||!n.credentials.email.length||!n.credentials.password.length){n.formError="All fields required, please try again";return false}else{console.log("register");o()}}function o(){e.register(n.credentials).then(function(e){if(e===true){t.path("/review")}else{n.formError=e}})}}})();(function(){"use strict";angular.module("app.auth").controller("LoginController",e);e.$inject=["AuthenticationService","$location"];function e(e,t){var n=this;n.credentials={email:"",password:""};n.onSubmit=i;function r(){}function i(){n.formError="";if(!n.credentials.email.length||!n.credentials.password.length){n.formError="All fields required, please try again";return false}else{o()}}function o(){e.login(n.credentials).then(function(e){if(e===true){t.path("/review")}else{n.formError=e}})}}})();